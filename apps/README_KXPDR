kxpdr - krad transponder

Krad Transponder is an experimental next-generation super efficient, hyper buzzword based
streaming server for Ogg and EBML (WebM/MKV) based formats. Formats that work without headers
or framing such as MP3 work incidentally.

Programs designed to work with Icecast servers will work with Krad Transponder without modification.

It is designed with high bitrate, 3D HD+ resolution, 12 channel surround sound and smellivision
in mind.

Krad Transponder is based on a few conceptual ideas on how to construct an ideal streaming
server. 

1) Use epoll(). This means we get the event based buzzword, and lots of theoetical 
speed and scalability. Linux only, because linux is the best system for the job.

2) No locking or blocking anywhere at any time.

3) Ringbuffering with vector based access. This means that there is exactly two memory copy
operations when streaming after the connection negotiation and header, from the source socket
into the ringbuffer, and from the ringbuffer into the client socket.

4) Multi-threaded event based non-blocking single threaded design.


Jargon:

Transponder - An automatic device that receives, amplifies, and retransmits a signal

Receiver    -  "Source" Clients connect to a receiver and send it their signal
Transmitter -  Clients connect to "transmitters" that are re-transmitting a signal from a receiver

In a satilite based system, things work as a "bent-pipe" or "mirror", in an interweb protocol based
system, a header must be first sent to each client and then the stream can be 'mirrored' starting
from a protocol based frame sync point. "Ogg Page" or "MKV Cluster"


Thread model:

Incoming receiver connections thread - handles incoming "source" clients
Incoming transmitter connections thread - handles incoming normal clients

Per source "receiver" thread, handles incoming data from a source
Per source "transmitter" thread that handles sending data to all clients of this source


* All ideas thought to be good maybe later thought to be very bad, this document is non-normative 
